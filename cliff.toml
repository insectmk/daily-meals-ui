# git-cliff é…ç½®æ–‡ä»¶
# https://git-cliff.org/docs/configuration
#
# ä»¥ "#" å¼€å¤´çš„è¡Œæ˜¯æ³¨é‡Šã€‚
# é…ç½®é€‰é¡¹æŒ‰è¡¨å’Œé”®ç»„ç»‡ã€‚
# æ›´å¤šå¯ç”¨é€‰é¡¹è¯·å‚é˜…æ–‡æ¡£ã€‚

[changelog]
# å˜æ›´æ—¥å¿—çš„æ ‡é¢˜æ¨¡æ¿
header = """
# å˜æ›´æ—¥å¿—\n
æœ¬æ–‡ä»¶è®°å½•äº†æœ¬é¡¹ç›®çš„æ‰€æœ‰é‡è¦å˜æ›´ã€‚\n
"""

# å˜æ›´æ—¥å¿—çš„å†…å®¹æ¨¡æ¿
# https://keats.github.io/tera/docs/#introduction
body = """
{% if version %}\
    ## [{{ version | trim_start_matches(pat="v") }}] - {{ timestamp | date(format="%Y-%m-%d") }}
{% else %}\
    ## [æœªå‘å¸ƒ]
{% endif %}\
{% for group, commits in commits | group_by(attribute="group") %}
    ### {{ group | striptags | trim | upper_first }}
    {% for commit in commits %}
        - {% if commit.scope %}*ã€{{ commit.scope }}ã€‘* {% endif %}\
            {% if commit.breaking %}[**ç ´åæ€§å˜æ›´**] {% endif %}\
            {{ commit.message | upper_first }}\
    {% endfor %}
{% endfor %}\n
"""

# å˜æ›´æ—¥å¿—çš„é¡µè„šæ¨¡æ¿
footer = """
<!-- ç”± git-cliff ç”Ÿæˆ -->
"""

# ç§»é™¤å†…å®¹å‰åçš„ç©ºç™½
trim = true

# åå¤„ç†å™¨
postprocessors = [
  # { pattern = '<REPO>', replace = "https://github.com/orhun/git-cliff" }, # æ›¿æ¢ä»“åº“ URL
]

# å³ä½¿æ²¡æœ‰å‘å¸ƒç‰ˆæœ¬ä¹Ÿæ¸²æŸ“å†…å®¹
# render_always = true

# è¾“å‡ºæ–‡ä»¶è·¯å¾„
# output = "CHANGELOG.md"

[git]
# åŸºäº https://www.conventionalcommits.org è§£ææäº¤ä¿¡æ¯
conventional_commits = true

# è¿‡æ»¤æ‰ä¸ç¬¦åˆè§„èŒƒçš„æäº¤
filter_unconventional = true

# å°†æäº¤çš„æ¯ä¸€è¡Œä½œä¸ºå•ç‹¬çš„æäº¤å¤„ç†
split_commits = false

# æäº¤ä¿¡æ¯çš„é¢„å¤„ç†æ­£åˆ™è¡¨è¾¾å¼
commit_preprocessors = [
  # æ›¿æ¢é—®é¢˜ç¼–å·
  #{ pattern = '$(\w+\s)?#([0-9]+)$', replace = "([#${2}](<REPO>/issues/${2}))"},
  # ä½¿ç”¨ https://github.com/crate-ci/typos æ£€æŸ¥æäº¤ä¿¡æ¯çš„æ‹¼å†™
  # å¦‚æœæ‹¼å†™é”™è¯¯ï¼Œä¼šè‡ªåŠ¨ä¿®æ­£ã€‚
  #{ pattern = '.*', replace_command = 'typos --write-changes -' },
]

# æäº¤ä¿¡æ¯çš„è§£æå’Œåˆ†ç»„è§„åˆ™
commit_parsers = [
  { message = "^feat", group = "ğŸš€ æ–°åŠŸèƒ½" },
  { message = "^fix", group = "ğŸ› Bug ä¿®å¤" },
  { message = "^perf", group = "âš¡ æ€§èƒ½ä¼˜åŒ–" },
  { message = "^style", group = "ğŸ¨ ä»£ç æ ·å¼" },
  { message = "^docs", group = "ğŸ“š æ–‡æ¡£æ›´æ–°" },
  { message = "^test", group = "ğŸ§ª æµ‹è¯•ç›¸å…³" },
  { message = "^refactor", group = "ğŸšœ ä»£ç é‡æ„" },
  { message = "^build", group = "ğŸ“¦ æ„å»ºç³»ç»Ÿ" },
  { message = "^ci", group = "ğŸ”§ CI é…ç½®" },
  { message = "^chore", group = "âš™ï¸ æ‚é¡¹ä»»åŠ¡" },
  { message = "^revert", group = "â—€ï¸ å›æ»šå˜æ›´" },
  { message = "^wip", group = "ğŸš§ è¿›è¡Œä¸­" },
  { message = "^workflow", group = "ğŸ”§ å·¥ä½œæµ" },
  { message = "^types", group = "ğŸ“¦ ç±»å‹ç›¸å…³" },
  { message = "^release", group = "ğŸ·ï¸ ç‰ˆæœ¬å‘å¸ƒ" },
  { message = ".*", group = "ğŸ’¼ å…¶ä»–" },
]

# è¿‡æ»¤æ‰æœªè¢«æäº¤è§£æå™¨åŒ¹é…çš„æäº¤
filter_commits = false

# æŒ‰æ‹“æ‰‘é¡ºåºæ’åºæ ‡ç­¾
topo_order = false

# æŒ‰æäº¤æ—¶é—´æ’åºï¼ˆoldest æˆ– newestï¼‰
sort_commits = "oldest"